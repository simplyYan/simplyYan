#!/bin/bash

echo "📦 Updating system..."
apt update && apt upgrade -y

echo "🔧 Installing essential dependencies..."
apt install -y git curl wget build-essential python3 python3-pip python3-venv golang net-tools lsb-release software-properties-common

echo "🐍 Ensuring Python and pip are up to date..."
python3 -m pip install --upgrade pip setuptools

echo "⚙️ Installing pentest tools..."

# 1. DNSEnum
echo "🔎 Installing dnsenum..."
apt install -y dnsenum

# 2. Aircrack-ng
echo "📶 Installing aircrack-ng..."
apt install -y aircrack-ng

# 3. MDK4
echo "📡 Installing mdk4..."
apt install -y mdk4

# 4. Recon-ng
echo "🕵️ Installing recon-ng..."
git clone https://github.com/lanmaster53/recon-ng.git /opt/recon-ng
ln -s /opt/recon-ng/recon-ng /usr/local/bin/recon-ng
chmod +x /usr/local/bin/recon-ng

# 5. EyeWitness
echo "📸 Installing EyeWitness..."
apt install -y seclists chromium-driver
git clone https://github.com/FortyNorthSecurity/EyeWitness.git /opt/EyeWitness
cd /opt/EyeWitness/setup && ./setup.sh
ln -s /opt/EyeWitness/EyeWitness.py /usr/local/bin/eyewitness
cd ~

# 6. Maigret
echo "🔍 Installing Maigret..."
pip install maigret

# 7. Nikto
echo "🌐 Installing Nikto..."
apt install -y nikto

# 8. Netcat
echo "🧪 Installing Netcat..."
apt install -y netcat

# 9. Dmitry
echo "🕸️ Installing Dmitry..."
apt install -y dmitry

# 10. Nmap
echo "🛰️ Installing Nmap..."
apt install -y nmap

# 11. Python & Go
echo "🐍 Python and 🔵 Go already installed!"

# 12. Wireshark
echo "🧬 Installing Wireshark..."
DEBIAN_FRONTEND=noninteractive apt install -y wireshark
usermod -aG wireshark $SUDO_USER

# 13. Tor & Proxychains
echo "🕶️ Installing Tor and Proxychains..."
apt install -y tor proxychains4
systemctl enable tor --now

# Optional: Create alias for easy Tor proxy use
echo "alias proxytor='proxychains4'" >> /home/$SUDO_USER/.bashrc

echo ""
echo "✅ All tools installed successfully!"
echo "🔁 Please reboot or logout/login to apply group changes (Wireshark)."
echo "💡 Tip: Use 'proxychains4 <command>' to route tools through Tor."
echo "🔥 System is now ready for efficient pentesting!"
